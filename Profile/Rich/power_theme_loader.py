"""–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–≥—Ä—É–∑—á–∏–∫ —Ç–µ–º—ã Power –¥–ª—è –≤—Å–µ—Ö Python —Å–∫—Ä–∏–ø—Ç–æ–≤"""

import sys
import site
from pathlib import Path

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —Ç–µ–º—ã
THEME_PATH = Path(__file__).parent / 'power_theme.py'


# –°–æ–∑–¥–∞—ë–º .pth —Ñ–∞–π–ª –¥–ª—è –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏
def install_theme():
    """–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º—É –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö Python —Å–∫—Ä–∏–ø—Ç–æ–≤"""
print(f"‚ù§Ô∏è‚Äçüî• Power Theme installing...")
# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è sitecustomize.py
sitecustomize_content = f"""
# Auto-generated by Power Theme installer
import sys
sys.path.insert(0, r'{THEME_PATH.parent}')

try:
    from power_theme import init_power_theme, console
    # –î–µ–ª–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º –≥–ª–æ–±–∞–ª—å–Ω–æ
    import builtins
    builtins.console = console
    builtins.rprint = console.print
except ImportError:
    pass  # –¢–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥
"""

# –ù–∞—Ö–æ–¥–∏–º site-packages
site_packages = site.getsitepackages()[0]
sitecustomize_path = Path(site_packages) / 'sitecustomize.py'

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º
sitecustomize_path.write_text(sitecustomize_content)
print(f"‚úÖ Power Theme installed to {sitecustomize_path}")


if __name__ == "__main__":
    install_theme()